backend:
  name: git-gateway
  branch: main

publish_mode: editorial_workflow
media_folder: "images/uploads" # Passt den Pfad für hochgeladene Bilder an
public_folder: "/images/uploads"

collections:
  - name: "immobilien"
    label: "Immobilien"
    # WICHTIG: Sagt dem CMS, dass es Dateien in diesem Ordner speichern soll
    folder: "immobilien"
    create: true
    # Erstellt Dateinamen basierend auf dem 'title'-Feld (z.B. 'neue-wohnung.md')
    slug: "{{title | slugify}}"
    
    fields:
      # Für Eleventy: Wird für die URL-Erstellung verwendet
      - { label: "Titel (für URL)", name: "title", widget: "string", required: true, hint: "Kurzname für die URL (z.B. 'test-wohnung-in-berlin')" }
      
      # Sichtbare Daten
      - { label: "Anzeigetitel", name: "titel", widget: "string", required: true }
      
      # NEU: Unterscheidung Kauf / Miete (Wichtig für Filter!)
      - { label: "Vermarktungsart", name: "vermarktungsart", widget: "select", options: [ "Kauf", "Miete" ], default: "Kauf", required: true }
      
      # NEU: Objektart (Wichtig für Filter!)
      - { label: "Objektart", name: "objektart", widget: "select", options: [ "Wohnung", "Haus", "Grundstück", "Gewerbe" ], default: "Wohnung", required: true }

      - { label: "Ort", name: "ort", widget: "string", required: true }
      - { label: "Preis (€) / Kaltmiete", name: "preis", widget: "number", value_type: "int", required: true }
      - { label: "Maklercourtage", name: "provision", widget: "string", required: false, hint: "z.B. '3,57 % inkl. MwSt.' oder 'Provisionsfrei'" }
      - { label: "Status", name: "status", widget: "select", options: [ "NEU", "VERKAUFT", "RESERVIERT", "VERMIETET" ], default: "NEU" }

      - { label: "Hauptbild", name: "hauptbild", widget: "image", required: true }
      - { label: "Objektbeschreibung", name: "body", widget: "markdown" }
      
      # Eckdaten
      - label: "Eckdaten"
        name: "eckdaten"
        widget: "object"
        fields:
          - { label: "Wohnfläche (m²)", name: "flaeche", widget: "number", value_type: "int" }
          - { label: "Anzahl Zimmer", name: "zimmer", widget: "number", value_type: "int" }
          - { label: "Baujahr", name: "baujahr", widget: "number", value_type: "int", min: 1800, max: 2050 }
      
      # Versteckte Felder
      - { label: "Layout", name: "layout", widget: "hidden", default: "immobilien-detail.liquid" }
      - { label: "Permalink", name: "permalink", widget: "hidden", default: "angebote/{{title | slugify}}/index.html" }
      - { label: "Tags", name: "tags", widget: "hidden", default: "immobilien" }